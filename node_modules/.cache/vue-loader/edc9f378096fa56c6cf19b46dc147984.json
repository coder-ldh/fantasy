{"remainingRequest":"/Users/wenjian/Desktop/github/fantasy/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wenjian/Desktop/github/fantasy/src/components/bookIndex/search/index.vue?vue&type=style&index=0&id=b4d107be&lang=scss&scoped=true&","dependencies":[{"path":"/Users/wenjian/Desktop/github/fantasy/src/components/bookIndex/search/index.vue","mtime":1590046802006},{"path":"/Users/wenjian/Desktop/github/fantasy/node_modules/css-loader/index.js","mtime":1590023966683},{"path":"/Users/wenjian/Desktop/github/fantasy/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1590023615263},{"path":"/Users/wenjian/Desktop/github/fantasy/node_modules/postcss-loader/src/index.js","mtime":1590023615114},{"path":"/Users/wenjian/Desktop/github/fantasy/node_modules/sass-loader/dist/cjs.js","mtime":1590023967846},{"path":"/Users/wenjian/Desktop/github/fantasy/node_modules/cache-loader/dist/cjs.js","mtime":1590023966642},{"path":"/Users/wenjian/Desktop/github/fantasy/node_modules/vue-loader/lib/index.js","mtime":1590023615263}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#searchPage {\n  flex: 1;\n  width: 100%;\n  // margin-top: 40px;\n  padding-top: 80px;\n  padding-bottom: 60px;\n  .search-box {\n    width: 100%;\n    height: 50px;\n    background-color: #f9f9f9;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    .search-content {\n      position: relative;\n      width: 90%;\n      input {\n        width: 100%;\n        height: 30px;\n        padding: 0 10px 0 30px;\n        box-sizing: border-box;\n        outline: none;\n      }\n      span {\n        position: absolute;\n        top: 8px;\n        left: 6px;\n      }\n    }\n  }\n  .result {\n    padding: 0 15px;\n    height: 30px;\n    line-height: 30px;\n    color: #555;\n    border-bottom: 1px solid #ddd;\n  }\n  .search-result {\n    padding: 10px;\n    width: 100%;\n    ul li {\n      display: flex;\n      flex-direction: row;\n      margin-top: 10px;\n      .img {\n        width: 64px;\n        height: 90px;\n        img {\n          display: block;\n          width: 100%;\n          background-color: red;\n        }\n      }\n      .info {\n        flex: 1;\n        padding-left: 15px;\n        h2 {\n          font-weight: 500;\n        }\n        p {\n          font-size: 12px;\n          margin: 10px;\n        }\n      }\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/bookIndex/search","sourcesContent":["<template>\n  <div id=\"searchPage\">\n    <div class=\"search-box\">\n      <div class=\"search-content\">\n        <input type=\"text\" autofocus placeholder=\"请输入关键字\" v-model=\"query\">\n        <span class=\"iconfont\">&#xe751;</span>\n      </div>\n    </div>\n    <div class=\"result\">\n      <p>科幻片</p>\n    </div>\n    <loading v-if=\"isLoading\"></loading>\n    <div class=\"search-result\">\n      <ul>\n        <li v-for=\"item in bookList\" :key=\"item.id\">\n          <div class=\"img\">\n            <img :src=\"'http://img2.imgtn.bdimg.com/it/u=1884987646,3498928628&fm=26&gp=0.jpg' | imgFormat('128.180')\" alt>\n          </div>\n          <div class=\"info\">\n            <h2>{{item.bookName}}</h2>\n            <!-- <p>{{ item.bookIntro }}</p> -->\n            <p>评分：{{ item.sc }}</p>\n            <p>主演：{{ item.bookAuthor }}</p>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"searchPage\",\n  data() {\n    return {\n      query: \"\",\n      bookList: [], // 存放电影列表数据\n      cancelTokenFn: null,\n      isLoading:false\n    };\n  },\n  // 使用watch发起监听异步请求\n  watch: {\n    query: function(newVal) {\n      // console.log(newVal);\n      // 发送axios请求\n      // 设置函数抖动\n      this.isLoading = true;\n      const _this = this;\n      const CancelToken = this.axios.CancelToken;\n\n      this.cancelTokenFn && this.cancelTokenFn();\n      this.cancelTokenFn = null;\n      this.axios\n        .get(\"http://localhost:9090/book/query?query=\" + newVal, {\n          cancelToken: new CancelToken(function executor(c) {\n            _this.cancelTokenFn = c;\n          })\n        })\n        .then(res => {\n          // console.log(res)\n          // console.log(res.data.data.movies);\n          if (newVal && res.status === 200 && res.data.data) {\n            this.bookList = res.data.data.documents;\n            // 数据处理成功之后，将loading 取消\n            this.isLoading = false;\n          }\n        })\n        .catch(() => {\n          // ❌信息提示\n          // console.log(err);\n        });\n      if (newVal === \"\") {\n        this.bookList.length = 0;\n        //  清除输入框，也将isLoading变成false\n        this.isLoading =false;\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#searchPage {\n  flex: 1;\n  width: 100%;\n  // margin-top: 40px;\n  padding-top: 80px;\n  padding-bottom: 60px;\n  .search-box {\n    width: 100%;\n    height: 50px;\n    background-color: #f9f9f9;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    .search-content {\n      position: relative;\n      width: 90%;\n      input {\n        width: 100%;\n        height: 30px;\n        padding: 0 10px 0 30px;\n        box-sizing: border-box;\n        outline: none;\n      }\n      span {\n        position: absolute;\n        top: 8px;\n        left: 6px;\n      }\n    }\n  }\n  .result {\n    padding: 0 15px;\n    height: 30px;\n    line-height: 30px;\n    color: #555;\n    border-bottom: 1px solid #ddd;\n  }\n  .search-result {\n    padding: 10px;\n    width: 100%;\n    ul li {\n      display: flex;\n      flex-direction: row;\n      margin-top: 10px;\n      .img {\n        width: 64px;\n        height: 90px;\n        img {\n          display: block;\n          width: 100%;\n          background-color: red;\n        }\n      }\n      .info {\n        flex: 1;\n        padding-left: 15px;\n        h2 {\n          font-weight: 500;\n        }\n        p {\n          font-size: 12px;\n          margin: 10px;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}